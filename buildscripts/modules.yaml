# Sunray 构建模块配置文件 - 简化版本
# 直接基于 build_deprecated 目录的构建脚本

# ========== 模块定义 ==========
modules:
  # 基础通用模块
  sunray_common:
    description: "通用库模块，包括通用头文件、自定义ROS消息"
    source_path: "General_Module/sunray_common"
    build_path: "build/sunray_common"
    dependencies: []

  # UAV 与 FMT 控制模块
  sunray_uav_control:
    description: "无人机控制模块，包含外部定位、无人机控制等"
    source_path: "General_Module/sunray_uav_control"
    build_path: "build/sunray_uav_control"
    dependencies: ["sunray_common"]

  # Woosen控制模块
  Woosen:
    description: "Woosen控制模块"
    source_path: "General_Module/woosen"
    build_path: "build/woosen"
    dependencies: ["sunray_common", "sunray_tutorial"]

  sunray_tutorial:
    description: "无人机控制接口示例代码模块，包括起飞降落、航点追踪、方形轨迹、圆形轨迹、六边形轨迹等示例代码"
    source_path: "General_Module/sunray_tutorial"
    build_path: "build/sunray_tutorial"
    dependencies: ["sunray_common"]

  sunray_fmt_control:
    description: "FMT无人机控制模块，包含FMT无人机控制节点"
    source_path: "General_Module/sunray_fmt_control"
    build_path: "build/sunray_fmt_control"
    dependencies: ["sunray_common"]
    
  sunray_media:
    description: "视频推流模块"
    source_path: "General_Module/sunray_media"
    build_path: "build/sunray_media"
    dependencies: ["sunray_common"]

  # 通信模块
  sunray_communication_bridge:
    description: "通信桥接模块，包括机载电脑与Sunray地面站通信、无人机/车间通信"
    source_path: "Comunication_Module/sunray_communication_bridge"
    build_path: "build/sunray_communication_bridge"
    dependencies: ["sunray_common"]
    
  vrpn_client_ros:
    description: "VRPN客户端，获取动捕数据"
    source_path: "External_Module/vrpn_client_ros"
    build_path: "build/vrpn_client_ros"
    dependencies: []
    
  sunray_planner_utils:
    description: "路径规划工具，包含点云转换"
    source_path: "General_Module/sunray_planner_utils"
    build_path: "build/sunray_planner_utils"
    dependencies: ["sunray_common"]
      
  #云台控制模块
  sunray_gimbal:
    description: "云台控制模块"
    source_path: "General_Module/sunray_gimbal"
    build_path: "build/sunray_gimbal"
    dependencies: ["sunray_common", "sunray_tutorial"]

  # UGV 控制模块
  sunray_ugv_control:
    description: "地面车辆控制模块，包含底层控制驱动，车辆外部定位，车辆控制节点"
    source_path: "General_Module/sunray_ugv_control"
    build_path: "build/sunray_ugv_control"
    dependencies: ["sunray_common"]
    
  turn_on_wheeltec_robot:
    description: "轮趣无人车驱动包"
    source_path: "External_Module/turn_on_wheeltec_robot"
    build_path: "build/turn_on_wheeltec_robot"
    dependencies: []

  oradar_lidar:
    description: "ms200激光雷达驱动包"
    source_path: "External_Module/oradar_lidar"
    build_path: "build/oradar_lidar"
    dependencies: []

  # 仿真模块
  sunray_simulator:
    description: "Gazebo仿真模块，包含仿真环境、仿真工具、仿真插件、仿真启动文件等"
    source_path: "Simulation/sunray_simulator"
    build_path: "build/sunray_simulator"
    dependencies: ["sunray_common"]
    
  simulator_utils:
    description: "仿真工具"
    source_path: "Simulation/simulator_utils"
    build_path: "build/simulator_utils"
    dependencies: ["sunray_common"]
    
  gazebo_plugin:
    description: "Gazebo仿真插件"
    source_path: "Simulation/gazebo_plugin"
    build_path: "build/gazebo_plugin"
    dependencies: []

  wind_zone_plugin:
    description: "风场仿真插件"
    source_path: "Simulation/gazebo_plugin/wind_zone_plugin"
    build_path: "build/wind_zone_plugin"
    dependencies: []

  random_cylinder_plugin:
    description: "随机柱子仿真插件"
    source_path: "Simulation/gazebo_plugin/random_cylinder_plugin"
    build_path: "build/random_cylinder_plugin"
    dependencies: []

  # 比赛模块
  sunray_competition:
    description: "2025FAC比赛模块"
    source_path: "Simulation/2025_uav_competition_demo"
    build_path: "build/2025_uav_competition_demo"
    dependencies: ["sunray_common"]

  sunray_score:
    description: "2025FAC比赛记分模块"
    source_path: "Simulation/future_2025_score"
    build_path: "build/future_2025_score"
    dependencies: ["sunray_common"]

  sysu_competition:
    description: "逸仙勇士杯比赛模块"
    source_path: "Simulation/sysu_competition"
    build_path: "build/sysu_competition"
    dependencies: ["sunray_common"]

  # 规划器模块
  ego_planner:
    description: "EGO-planner路径规划算法"
    source_path: "External_Module/ego-planner-swarm"
    build_path: "build/ego-planner"
    dependencies: ["sunray_planner_utils", "simulator_utils"]
    conflicts_with: ["fuel_planner"]
    
  fuel_planner:
    description: "FUEL路径规划算法"
    source_path: "External_Module/FUEL"
    build_path: "build/FUEL"
    dependencies: ["sunray_planner_utils"]
    conflicts_with: ["ego_planner"]

  # 编队模块
  sunray_formation:
    description: "多机编队控制模块"
    source_path: "sunray_formation/formation_control"
    build_path: "build/formation_control"
    dependencies: ["sunray_common"]

  # 编队RVIZ仿真模块
  formation_sim:
    description: "多机编队RVIZ仿真模块"
    source_path: "sunray_formation/formation_sim"
    build_path: "build/formation_sim"
    dependencies: ["sunray_common"]

  # ORCA算法ROS实现
  sunray_orca:
    description: "ORCA算法"
    source_path: "sunray_formation/sunray_orca"
    build_path: "build/sunray_orca"
    dependencies: ["sunray_common"]


  # 图像识别模块
  sunray_detection:
    description: "图像识别模块"
    source_path: "External_Module/sunray_detection"
    build_path: "build/sunray_detection"
    dependencies: ["sunray_planner_utils"]
   
  # 感知定位模块
  vins_fusion:
    description: "感知定位模块"
    source_path: "External_Module/VINS-Fusion"
    build_path: "build/vins_fusion"
    dependencies: [""]

  # Woosen控制模块
  Woosen:
    description: "Woosen控制模块"
    source_path: "General_Module/woosen"
    build_path: "build/woosen"
    dependencies: ["sunray_common", "sunray_tutorial"]

# ========== 预定义组 ==========
# 直接基于 build_deprecated 目录的脚本内容
groups:
  # 无人机飞行控制系统
  woosen:
    description: "默认使用这个组，Woosen无人机飞行控制系统，包含无人机飞行控制，无人机控制节点，示例代码，Woosen控制模块"
    modules: ["sunray_common", "sunray_uav_control", "sunray_tutorial", "Woosen"]

  uav:
    description: "包含无人机飞行控制，仿真环境，仿真工具，仿真插件，通信桥接，无人机控制节点，示例代码，路径规划工具，视频推流，编队控制"
    modules: ["sunray_common", "vrpn_client_ros", "sunray_simulator", "gazebo_plugin", "simulator_utils", "sunray_communication_bridge", "sunray_uav_control", "sunray_tutorial", "sunray_planner_utils", "sunray_gimbal", "sunray_media", "ego_planner", "sunray_formation"]
    
  # FMT无人机飞行控制系统
  fmt:
    description: "FMT无人机飞行控制系统，包含FMT无人机飞行控制节点，通信桥接，示例代码"
    modules: ["sunray_common", "vrpn_client_ros", "sunray_communication_bridge", "sunray_fmt_control", "sunray_tutorial"]

  viobot:
    description: "VIOBOT无人机飞行控制系统，包含无人机飞行控制，通信桥接，无人机控制节点，示例代码，路径规划工具，视频推流"
    modules: ["sunray_common", "sunray_communication_bridge", "sunray_uav_control", "sunray_tutorial", "sunray_planner_utils", "sunray_media", "ego_planner", "sunray_detection"]

  # # EGO路径规划系统
  # ego:
  #   description: "EGO路径规划系统，包含EGO路径规划器，仿真工具，路径规划工具"
  #   modules: ["ego_planner", "simulator_utils", "sunray_planner_utils"]
    
  # 仿真环境与测试平台
  # sim:
  #   description: "仿真环境与测试平台"  
  #   modules: ["sunray_common", "sunray_uav_control", "vrpn_client_ros", "sunray_tutorial", "sunray_simulator", "simulator_utils", "gazebo_plugin"]

  # 比赛款无人机飞行控制系统
  uav_competition:
    description: "Sunray150-抛投器定制款专用编译模块"
    modules: ["sunray_common", "sunray_communication_bridge", "sunray_uav_control", "sunray_tutorial", "sunray_planner_utils", "sunray_competition"]
    

  # 比赛款仿真环境与测试平台
  sim_competition:
    description: "2025未来飞行器大赛仿真环境与测试平台"  
    modules: ["sunray_common", "sunray_uav_control", "sunray_tutorial", "sunray_simulator", "simulator_utils", "gazebo_plugin", "sunray_competition", "sunray_score", "wind_zone_plugin", "random_cylinder_plugin"]
    
  # 地面机器人控制系统
  ugv:
    description: "地面机器人控制系统，包含地面机器人控制节点，地面机器人外部定位，地面机器人控制驱动"
    modules: ["sunray_common","sunray_communication_bridge","vrpn_client_ros", "sunray_ugv_control", "turn_on_wheeltec_robot", "oradar_lidar", "sunray_tutorial"]

  swarm_uav:
    description: "“智群·Sunray”集群控制代码包，包含无人机飞行控制，通信桥接，无人机控制节点，集群控制，ORCA"
    modules: ["sunray_common", "sunray_communication_bridge", "sunray_uav_control", "sunray_orca", "sunray_formation"]


  # # 完整多机系统（不含地面机器人）
  # all:
  #   description: "完整多机系统（不含地面机器人）"
  #   modules: ["sunray_common", "sunray_uav_control", "vrpn_client_ros", "sunray_tutorial", "sunray_simulator", "sunray_planner_utils", "sunray_communication_bridge", "sunray_media", "ego_planner", "simulator_utils", "gazebo_plugin", "sunray_formation"]

# ========== 构建配置 ==========
build_config:
  default_jobs: "auto"
  catkin_command: "catkin_make"
