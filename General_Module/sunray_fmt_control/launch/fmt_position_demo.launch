<launch>

    <!-- UAV/动捕参数 -->
    <arg name="uav_id" default="1" />
    <arg name="server" default="192.168.20.15"/>
    <!-- MAVROS参数 -->
    <arg name="fcu_url" default="/dev/ttyUSB0:921600" />
    <arg name="gcs_url" default="udp://:14556@0.0.0.0:14551" />
    <arg name="fcu_protocol" default="v2.0" />
    <arg name="tgt_system" default="1" />
    <arg name="tgt_component" default="1" />

    <!-- 启动 vrpn_client_ros，假设对象名为 fmt -->
    <include file="$(find sunray_uav_control)/launch/sunray_vrpn.launch">
        <arg name="server" value="$(arg server)"/>
        <arg name="uav_id" value="$(arg uav_id)"/>
    </include>

    <!-- 启动 MAVROS -->
    <include file="$(find mavros)/launch/node.launch">
        <arg name="pluginlists_yaml" value="$(find sunray_uav_control)/config/px4_pluginlists.yaml" />
        <arg name="config_yaml" value="$(find sunray_uav_control)/config/px4_config.yaml" />
        <arg name="fcu_url" value="$(arg fcu_url)" />
        <arg name="gcs_url" value="$(arg gcs_url)" />
        <arg name="fcu_protocol" value="$(arg fcu_protocol)" />
        <arg name="tgt_system" value="$(arg tgt_system)" />
        <arg name="tgt_component" value="$(arg tgt_component)" />
    </include>

    <!-- 启动 VRPN → MAVROS 外部定位桥接节点（对象名：fmt） -->
    <node name="vrpn_to_vision_pose" pkg="sunray_fmt_control" type="vrpn_to_vision_pose" output="screen" />

</launch>
